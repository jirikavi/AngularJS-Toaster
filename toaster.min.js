/*!
 * AngularJS Toaster
 * Version: 0.4.10
 * Copyright 2013 Jiri Kavulak.
 * All Rights Reserved.
 * Use, reproduction, distribution, and modification of this code is subject to the terms and
 * conditions of the MIT license, available at http://www.opensource.org/licenses/mit-license.php
 *
 * Author: Jiri Kavulak
 * Related to project of John Papa and Hans FjÃ¤llemark
 */
 !function(){"use strict";angular.module("toaster",["ngAnimate"]).constant("toasterConfig",{limit:0,"tap-to-dismiss":!0,"close-button":!1,"newest-on-top":!0,"time-out":5e3,"icon-classes":{error:"toast-error",info:"toast-info",wait:"toast-wait",success:"toast-success",warning:"toast-warning"},"body-output-type":"","body-template":"toasterBodyTmpl.html","icon-class":"toast-info","position-class":"toast-top-right","title-class":"toast-title","message-class":"toast-message","mouseover-timer-stop":!0}).service("toaster",["$rootScope","toasterConfig",function(t,e){this.pop=function(e,s,o,i,a,n){if(angular.isObject(e)){var r=e;this.toast={type:r.type,title:r.title,body:r.body,timeout:r.timeout,bodyOutputType:r.bodyOutputType,clickHandler:r.clickHandler}}else this.toast={type:e,title:s,body:o,timeout:i,bodyOutputType:a,clickHandler:n};t.$emit("toaster-newToast")},this.clear=function(){t.$emit("toaster-clearToasts")};for(var s in e["icon-classes"])this[s]=function(t){return function(e,s,o,i,a){angular.isString(e)?this.pop(t,e,s,o,i,a):this.pop(angular.extend(e,{type:t}))}}(s)}]).factory("toasterRegisterEvents",function(){var t={_NewToastEvent:!1,_ClearAllToastsEvent:!1,registerNewToastEvent:function(){this._NewToastEvent=!0},registerClearAllToastsEvent:function(){this._ClearAllToastsEvent=!0},deregisterNewToastEvent:function(){this._NewToastEvent=!1},deregisterClearAllToastsEvent:function(){this._ClearAllToastsEvent=!1},isRegisteredNewToastEvent:function(){return this._NewToastEvent},isRegisteredClearAllToastsEvent:function(){return this._ClearAllToastsEvent}};return{registerNewToastEvent:t.registerNewToastEvent,registerClearAllToastsEvent:t.registerClearAllToastsEvent,deregisterNewToastEvent:t.deregisterNewToastEvent,deregisterClearAllToastsEvent:t.deregisterClearAllToastsEvent,isRegisteredNewToastEvent:t.isRegisteredNewToastEvent,isRegisteredClearAllToastsEvent:t.isRegisteredClearAllToastsEvent}}).directive("toasterContainer",["$parse","$rootScope","$interval","$sce","toasterConfig","toaster","toasterRegisterEvents",function(t,e,s,o,i,a,n){return{replace:!0,restrict:"EA",scope:!0,link:function(r,l,c){function u(e){switch(e.type=g["icon-classes"][e.type],e.type||(e.type=g["icon-class"]),m++,angular.extend(e,{id:m}),e.bodyOutputType=e.bodyOutputType||g["body-output-type"],e.bodyOutputType){case"trustedHtml":e.html=o.trustAsHtml(e.body);break;case"template":e.bodyTemplate=e.body||g["body-template"];break;case"templateWithData":var s=t(e.body||g["body-template"]),i=s(r);e.bodyTemplate=i.template,e.data=i.data}r.configureTimer(e),g["newest-on-top"]===!0?(r.toasters.unshift(e),g.limit>0&&r.toasters.length>g.limit&&r.toasters.pop()):(r.toasters.push(e),g.limit>0&&r.toasters.length>g.limit&&r.toasters.shift()),e.mouseover=!1}function d(t,e){t.timeout=s(function(){t.mouseover||r.removeToast(t.id)},e)}var g,m=0;g=angular.extend({},i,r.$eval(c.toasterOptions)),r.config={position:g["position-class"],title:g["title-class"],message:g["message-class"],tap:g["tap-to-dismiss"],closeButton:g["close-button"],animation:g["animation-class"],mouseoverTimer:g["mouseover-timer-stop"]},r.deregClearToasts=null,r.deregNewToast=null,r.$on("$destroy",function(){r.deregClearToasts&&r.deregClearToasts(),r.deregNewToast&&r.deregNewToast(),r.deregClearToasts=null,r.deregNewToast=null,n.deregisterNewToastEvent(),n.deregisterClearAllToastsEvent()}),r.configureTimer=function(t){var e="number"==typeof t.timeout?t.timeout:g["time-out"];e>0&&d(t,e)},r.toasters=[],n.isRegisteredNewToastEvent()||(n.registerNewToastEvent(),r.deregNewToast=e.$on("toaster-newToast",function(){u(a.toast)})),n.isRegisteredClearAllToastsEvent()||(n.registerClearAllToastsEvent(),r.deregClearToasts=e.$on("toaster-clearToasts",function(){r.toasters.splice(0,r.toasters.length)}))},controller:["$scope","$element","$attrs",function(t){t.stopTimer=function(e){e.mouseover=!0,t.config.mouseoverTimer===!0&&e.timeout&&(s.cancel(e.timeout),e.timeout=null)},t.restartTimer=function(e){e.mouseover=!1,t.config.mouseoverTimer===!0?e.timeout||t.configureTimer(e):null===e.timeout&&t.removeToast(a.id)},t.removeToast=function(e){var s=0;for(s;s<t.toasters.length&&t.toasters[s].id!==e;s++);t.toasters.splice(s,1)},t.click=function(e,s){if(t.config.tap===!0||1==s){var o=!0;e.clickHandler&&(angular.isFunction(e.clickHandler)?o=e.clickHandler(e,s):angular.isFunction(t.$parent.$eval(e.clickHandler))?o=t.$parent.$eval(e.clickHandler)(e,s):console.log("TOAST-NOTE: Your click handler is not inside a parent scope of toaster-container.")),o&&t.removeToast(e.id)}}}],template:'<div  id="toast-container" ng-class="[config.position, config.animation]"><div ng-repeat="toaster in toasters" class="toast" ng-class="toaster.type" ng-click="click(toaster)" ng-mouseover="stopTimer(toaster)"  ng-mouseout="restartTimer(toaster)"><button class="toast-close-button" ng-show="config.closeButton" ng-click="click(toaster, true)">&times;</button><div ng-class="config.title">{{toaster.title}}</div><div ng-class="config.message" ng-switch on="toaster.bodyOutputType"><div ng-switch-when="trustedHtml" ng-bind-html="toaster.html"></div><div ng-switch-when="template"><div ng-include="toaster.bodyTemplate"></div></div><div ng-switch-when="templateWithData"><div ng-include="toaster.bodyTemplate"></div></div><div ng-switch-default >{{toaster.body}}</div></div></div></div>'}}])}(window,document);